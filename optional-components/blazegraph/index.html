



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Documentation for Islandora Enterprise (ISLE)">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.2.0">
    
    
      
        <title>Blazegraph - Islandora Enterprise (ISLE)</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.750b69bd.css">
      
      
    
    
      <script src="../../assets/javascripts/modernizr.74668098.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
    
      <link rel="stylesheet" href="../../extra.css">
    
    
      
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#replacing-mulgara-with-blazegraph-for-high-performance-low-level-storage" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../.." title="Islandora Enterprise (ISLE)" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              Islandora Enterprise (ISLE)
            </span>
            <span class="md-header-nav__topic">
              Blazegraph
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../.." title="Islandora Enterprise (ISLE)" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    Islandora Enterprise (ISLE)
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Get Started" class="md-nav__link">
      Get Started
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2" checked>
    
    <label class="md-nav__link" for="nav-2">
      Install ISLE
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Install ISLE
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../install/host-hardware-requirements/" title="1. Hardware Requirements" class="md-nav__link">
      1. Hardware Requirements
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../install/host-software-dependencies/" title="2. Software Dependencies" class="md-nav__link">
      2. Software Dependencies
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../install/install-demo/" title="3. Demo ISLE Installation" class="md-nav__link">
      3. Demo ISLE Installation
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-4" type="checkbox" id="nav-2-4" checked>
    
    <label class="md-nav__link" for="nav-2-4">
      4. ISLE Installation
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-4">
        4. ISLE Installation
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../install/install-environments/" title="Overview: ISLE Environments" class="md-nav__link">
      Overview: ISLE Environments
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../install/install-local-new/" title="Local: New Site" class="md-nav__link">
      Local: New Site
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../install/install-local-migrate/" title="Local: Migrate Site" class="md-nav__link">
      Local: Migrate Site
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../install/install-staging-new/" title="Staging: New Site" class="md-nav__link">
      Staging: New Site
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../install/install-staging-migrate/" title="Staging: Migrate Site" class="md-nav__link">
      Staging: Migrate Site
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../install/install-production-new/" title="Production: New Site" class="md-nav__link">
      Production: New Site
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../install/install-production-migrate/" title="Production: Migrate Site" class="md-nav__link">
      Production: Migrate Site
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../install/install-troubleshooting/" title="Troubleshooting Guide" class="md-nav__link">
      Troubleshooting Guide
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-4-9" type="checkbox" id="nav-2-4-9" checked>
    
    <label class="md-nav__link" for="nav-2-4-9">
      Optional Components
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-2-4-9">
        Optional Components
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../components/" title="Overview: Components" class="md-nav__link">
      Overview: Components
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../automated-testing/" title="Automated Testing" class="md-nav__link">
      Automated Testing
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Blazegraph
      </label>
    
    <a href="./" title="Blazegraph" class="md-nav__link md-nav__link--active">
      Blazegraph
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#use-cases-user-stories" title="Use Cases &amp; User Stories" class="md-nav__link">
    Use Cases &amp; User Stories
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#new-functionality" title="New Functionality" class="md-nav__link">
    New Functionality
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#system-requirements" title="System Requirements" class="md-nav__link">
    System Requirements
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#isle-images" title="ISLE Images" class="md-nav__link">
    ISLE Images
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adoption-process-overview" title="Adoption Process Overview" class="md-nav__link">
    Adoption Process Overview
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installation" title="Installation" class="md-nav__link">
    Installation
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#assumptions" title="Assumptions" class="md-nav__link">
    Assumptions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#installation-instructions" title="Installation Instructions" class="md-nav__link">
    Installation Instructions
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#check-rebuild-fedora-when-using-blazegraph" title="Check &amp; Rebuild Fedora When Using Blazegraph" class="md-nav__link">
    Check &amp; Rebuild Fedora When Using Blazegraph
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#check-the-blazegraph-triples-count" title="Check the Blazegraph Triples Count" class="md-nav__link">
    Check the Blazegraph Triples Count
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-blazegraph-the-tick-stack" title="Using Blazegraph &amp; the TICK Stack" class="md-nav__link">
    Using Blazegraph &amp; the TICK Stack
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#uninstallation-instructions" title="Uninstallation Instructions" class="md-nav__link">
    Uninstallation Instructions
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#need-help" title="Need Help?" class="md-nav__link">
    Need Help?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#additional-resources" title="Additional Resources" class="md-nav__link">
    Additional Resources
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../loc-proxy/" title="Loc.gov Proxy" class="md-nav__link">
      Loc.gov Proxy
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tickstack/" title="TICK Stack" class="md-nav__link">
      TICK Stack
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../varnish/" title="Varnish" class="md-nav__link">
      Varnish
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../update/update/" title="Update ISLE" class="md-nav__link">
      Update ISLE
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Appendices
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Appendices
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../appendices/data-persistence/" title="Data Persistence in Docker" class="md-nav__link">
      Data Persistence in Docker
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../appendices/glossary/" title="Glossary" class="md-nav__link">
      Glossary
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../appendices/installing-module-with-composer/" title="Installing a Drupal Module with Composer" class="md-nav__link">
      Installing a Drupal Module with Composer
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../appendices/installing-module-with-drush/" title="Installing a Drupal Module with Drush" class="md-nav__link">
      Installing a Drupal Module with Drush
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="https://docs.google.com/document/d/1r-I9n8mUhlJ5Z-X9AO-RrikhzH6I8bTPIL25LmtRbxE" title="Installing on Google Cloud Platform (Google Doc)" class="md-nav__link">
      Installing on Google Cloud Platform (Google Doc)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../appendices/configuring-lets-encrypt/" title="Let's Encrypt: Free SSL Certificates" class="md-nav__link">
      Let's Encrypt: Free SSL Certificates
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../appendices/open-terminal-in-running-container/" title="Opening a Terminal in a Running Container" class="md-nav__link">
      Opening a Terminal in a Running Container
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../appendices/sample-it-department-request/" title="Sample IT Department Request Letter" class="md-nav__link">
      Sample IT Department Request Letter
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../appendices/install-troubleshooting/" title="Troubleshooting" class="md-nav__link">
      Troubleshooting
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-10" type="checkbox" id="nav-4-10">
    
    <label class="md-nav__link" for="nav-4-10">
      User Stories
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-10">
        User Stories
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../appendices/user-story-demo-site/" title="Demo ISLE Installation Example User Story" class="md-nav__link">
      Demo ISLE Installation Example User Story
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../appendices/user-story-new-site/" title="New Site Example User Story" class="md-nav__link">
      New Site Example User Story
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../appendices/user-story-migration-site/" title="Migration Example User Story" class="md-nav__link">
      Migration Example User Story
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../appendices/redhat/" title="Warning about Red Hat Install" class="md-nav__link">
      Warning about Red Hat Install
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Cookbook Recipes
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Cookbook Recipes
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../cookbook-recipes/isle-cheatsheet-docker-commands/" title="ISLE Cheat Sheet: Docker Commands" class="md-nav__link">
      ISLE Cheat Sheet: Docker Commands
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cookbook-recipes/boot-from-external-drive/" title="How to Boot From External Drive" class="md-nav__link">
      How to Boot From External Drive
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      About
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        About
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../about/about-isle/" title="About ISLE" class="md-nav__link">
      About ISLE
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../about/contributing/" title="Contributing to ISLE" class="md-nav__link">
      Contributing to ISLE
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-3" type="checkbox" id="nav-6-3">
    
    <label class="md-nav__link" for="nav-6-3">
      Contributor Docs
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-6-3">
        Contributor Docs
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../contributor-docs/mkdocs/" title="Docs: MkDocs" class="md-nav__link">
      Docs: MkDocs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../contributor-docs/spell-checker/" title="Docs: Spell Checker" class="md-nav__link">
      Docs: Spell Checker
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../contributor-docs/style-guide/" title="Docs: Style Guide" class="md-nav__link">
      Docs: Style Guide
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../contributor-docs/testing-guide/" title="Testing Guide" class="md-nav__link">
      Testing Guide
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../about/get-help/" title="Get Help" class="md-nav__link">
      Get Help
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../contributor-docs/release-process/" title="Release Process" class="md-nav__link">
      Release Process
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      Release Notes
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        Release Notes
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../release-notes/release-1-3-0/" title="Latest release: 1.3.0" class="md-nav__link">
      Latest release: 1.3.0
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-2" type="checkbox" id="nav-7-2">
    
    <label class="md-nav__link" for="nav-7-2">
      Previous releases
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-7-2">
        Previous releases
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../release-notes/release-1-2-0/" title="1.2.0" class="md-nav__link">
      1.2.0
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release-notes/release-1-1-2/" title="1.1.2" class="md-nav__link">
      1.1.2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release-notes/release-1-1-1/" title="1.1.1" class="md-nav__link">
      1.1.1
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release-notes/release-1-1-0/" title="1.1.0" class="md-nav__link">
      1.1.0
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#use-cases-user-stories" title="Use Cases &amp; User Stories" class="md-nav__link">
    Use Cases &amp; User Stories
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#new-functionality" title="New Functionality" class="md-nav__link">
    New Functionality
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#system-requirements" title="System Requirements" class="md-nav__link">
    System Requirements
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#isle-images" title="ISLE Images" class="md-nav__link">
    ISLE Images
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adoption-process-overview" title="Adoption Process Overview" class="md-nav__link">
    Adoption Process Overview
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installation" title="Installation" class="md-nav__link">
    Installation
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#assumptions" title="Assumptions" class="md-nav__link">
    Assumptions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#installation-instructions" title="Installation Instructions" class="md-nav__link">
    Installation Instructions
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#check-rebuild-fedora-when-using-blazegraph" title="Check &amp; Rebuild Fedora When Using Blazegraph" class="md-nav__link">
    Check &amp; Rebuild Fedora When Using Blazegraph
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#check-the-blazegraph-triples-count" title="Check the Blazegraph Triples Count" class="md-nav__link">
    Check the Blazegraph Triples Count
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-blazegraph-the-tick-stack" title="Using Blazegraph &amp; the TICK Stack" class="md-nav__link">
    Using Blazegraph &amp; the TICK Stack
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#uninstallation-instructions" title="Uninstallation Instructions" class="md-nav__link">
    Uninstallation Instructions
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#need-help" title="Need Help?" class="md-nav__link">
    Need Help?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#additional-resources" title="Additional Resources" class="md-nav__link">
    Additional Resources
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="replacing-mulgara-with-blazegraph-for-high-performance-low-level-storage">Replacing Mulgara with Blazegraph for High-Performance Low-Level Storage</h1>
<h2 id="use-cases-user-stories">Use Cases &amp; User Stories</h2>
<ul>
<li>As a repository administrator, I expect to be able to ingest millions of objects into an ISLE-based system without incurring significant performance degradation.</li>
</ul>
<h2 id="new-functionality">New Functionality</h2>
<ul>
<li>
<p>The new <code>isle-blazegraph</code> image was built using <a href="https://www.blazegraph.com/">Blazegraph™</a> which is a ultra high-performance graph database supporting Apache TinkerPop™ and RDF/SPARQL APIs. It supports up to 50 Billion edges on a single machine. Formerly known as BigData. The intended use is solely for maintaining performant support of large Fedora repositories containing millions of objects.</p>
</li>
<li>
<p>Why use this component with ISLE?</p>
<ul>
<li>Islandora users who have Fedora repositories with over 600K~ objects ingested have reported issues with using the default Mulgara triplestore used for indexing objects ingested into the Fedora repository. These issues include crashes, extreme performance slowdowns,system timeouts and more. Blazegraph is used to replace Mulgara as the triplestore and to deliver a higher level of performance for larger Fedora repositories. Please note the threshold given above for object count is an compilation of the anecdotal ranges gathered by the Islandora community. In some cases the number is as low as 600K~ when end users report challenges, others haven't encountered issues until the 1 million object count.</li>
</ul>
</li>
<li>
<p>How can I tell how many Fedora objects I have to determine if I should use this component?</p>
<ul>
<li>Walkthrough on getting triple counts. (TO DO)</li>
</ul>
</li>
<li>
<p>A new Fedora image that has slight image and functional changes is required to be used in tandem with Blazegraph. These image changes are primarily edits to the <code>fedora.fcg</code> file to use Blazegraph instead of Mulgara.</p>
</li>
<li>
<p>Additionally, a new <code>confd</code> configuration within the Fedora image and linked environmental variable has been added to the <code>.env</code> to allow users to "toggle" between Blazegraph and Mulgara as desired. In the event a user toggles between either desired triplestore, a reindex of the Fedora repository is required. With Fedora repositories of 600K+ objects or more, <strong>the indexing process will take double-digit hours to days</strong> depending on the complexity of the object relationships, ontology, etc.</p>
</li>
<li>
<p>No new software is required to be installed on the ISLE host machine, only new Docker containers, images and configurations are added to the ISLE platform.</p>
</li>
</ul>
<hr />
<h2 id="system-requirements">System Requirements</h2>
<ul>
<li><a href="https://github.com/Islandora-Collaboration-Group/ISLE">ISLE</a> release version <code>1.3.0</code></li>
<li><code>git clone https://github.com/Islandora-Collaboration-Group/ISLE.git</code></li>
</ul>
<h3 id="isle-images">ISLE Images</h3>
<table>
<thead>
<tr>
<th>Service</th>
<th>Repository</th>
<th>Tag</th>
</tr>
</thead>
<tbody>
<tr>
<td>Apache</td>
<td><a href="https://cloud.docker.com/u/islandoracollabgroup/repository/docker/islandoracollabgroup/isle-apache/tags">islandoracollabgroup/isle-apache</a></td>
<td><code>1.3.0</code></td>
</tr>
<tr>
<td>Blazegraph</td>
<td><a href="https://cloud.docker.com/u/islandoracollabgroup/repository/docker/islandoracollabgroup/isle-blazegraph">islandoracollabgroup/isle-blazegraph</a></td>
<td><code>1.3.0</code></td>
</tr>
<tr>
<td>Fedora</td>
<td><a href="https://cloud.docker.com/u/islandoracollabgroup/repository/docker/islandoracollabgroup/isle-fedora/tags">islandoracollabgroup/isle-fedora</a></td>
<td><code>1.3.0</code></td>
</tr>
<tr>
<td>Image-services</td>
<td><a href="https://cloud.docker.com/u/islandoracollabgroup/repository/docker/islandoracollabgroup/isle-imageservices">islandoracollabgroup/isle-imageservices</a></td>
<td><code>1.3.0</code></td>
</tr>
<tr>
<td>MySQL</td>
<td><a href="https://cloud.docker.com/u/islandoracollabgroup/repository/docker/islandoracollabgroup/isle-mysql">islandoracollabgroup/isle-mysql</a></td>
<td><code>1.3.0</code></td>
</tr>
<tr>
<td>Portainer</td>
<td><a href="https://hub.docker.com/r/portainer/portainer">portainer/portainer</a></td>
<td><code>latest</code></td>
</tr>
<tr>
<td>Solr</td>
<td><a href="https://cloud.docker.com/u/islandoracollabgroup/repository/docker/islandoracollabgroup/isle-solr/tags">islandoracollabgroup/isle-solr</a></td>
<td><code>1.3.0</code></td>
</tr>
<tr>
<td>Traefik</td>
<td><a href="https://hub.docker.com/_/traefik">traefik/traefik</a></td>
<td><code>1.7.9</code></td>
</tr>
</tbody>
</table>
<ul>
<li>
<p>Additional systems overhead, including:</p>
</li>
<li>
<p>Add an additional 2 GB RAM in total ISLE Host memory for Blazegraph to run</p>
</li>
<li>
<p>Plan on an additional 25-100+ GB disk space for "big_data" resource index persistence if running on Staging and/or Production ISLE instances.</p>
<ul>
<li>This index (<code>/var/bigdata/bigdata.jnl</code>) will grow quickly overtime and file sizes of over 25GB or more are possible with Fedora repositories that have over 1 million objects.</li>
</ul>
</li>
<li>
<p>To persist this file and directory in a bind-mount instead of a Docker volume, an edit will need to be made to the <code>docker-compose.yml</code> file in the <code>blazegraph</code> service, <code>volume</code> section.</p>
<ul>
<li>Change <code>isle-blazegraph-data</code> to your ISLE Host system specific bind-mount path.</li>
<li><strong>Example:</strong> <code>- /mnt/isle-blazegraph-data:/var/bigdata</code></li>
</ul>
</li>
<li>This disk should be a separate data disk that should be 25-100+ GB in capacity. Plan on resizing this disk when using Blazegraph with large Fedora repositories of over 600K+ of objects.</li>
</ul>
<hr />
<h2 id="adoption-process-overview">Adoption Process Overview</h2>
<ul>
<li>
<p>The installation instructions below will walk you through how to setup and run the optional Blazegraph container for use as an replacement triplestore for Fedora repositories with 600K+ of objects on either an ISLE demo or local instance.</p>
</li>
<li>
<p>You'll start by backing up all important data as needed.</p>
</li>
<li>
<p>You'll stop any running containers</p>
</li>
<li>
<p>You'll download ISLE images including a new ISLE image called <code>isle-blazegraph</code></p>
</li>
<li>
<p>You'll make additional edits and modifications to the following ISLE configuration files:</p>
<ul>
<li><code>docker-compose.local.yml</code></li>
<li><code>local.env</code></li>
</ul>
</li>
<li>
<p>You'll restart your containers with the new services having been added and configured.</p>
</li>
<li>
<p>You'll re-index your Fedora Resource &amp; SQL indices and ensure that the new Blazegraph triplestore is displaying triples.</p>
</li>
<li>
<p>You can <em>optionally</em> use and/or setup the new <a href="../tickstack/">TICK stack</a> to monitor this container and service on Staging and Production instances.</p>
</li>
</ul>
<hr />
<h2 id="installation">Installation</h2>
<h3 id="assumptions">Assumptions</h3>
<ul>
<li>
<p>Prior to installation, end user will have a running ISLE system using the current release of <code>1.3.0</code> images.</p>
</li>
<li>
<p>This installation process will give the functionality as stated in the <code>Systems Requirements</code> image table above for <code>Blazegraph</code> testing and even <code>TICK</code> stack usage.</p>
</li>
<li>
<p>Assumes you're prepared to configure your ISLE system to use Blazegraph instead of the default Mulgara triplestore.</p>
</li>
<li>
<p>Assumes the new Blazegraph port <code>8084</code> will not be open to the public Internet only to select trusted administrators.</p>
</li>
</ul>
<hr />
<h3 id="installation-instructions">Installation Instructions</h3>
<ul>
<li>Shut down your running containers if any. Precautionary step.</li>
<li>
<p><code>docker-compose down</code></p>
</li>
<li>
<p>Within the environment (.env files e.g. demo.env, local.env etc) there is a new block of ENV variables to use.</p>
<ul>
<li>
<p>If using Blazegraph, you will have to change the <code>FEDORA_RESOURCE_INDEX=mulgara</code> to <code>FEDORA_RESOURCE_INDEX=blazegraph</code></p>
</li>
<li>
<p>Whether using Mulgara or Blazegraph, please leave the <code>FEDORA_WEBAPP_HOME</code> value to the default below.</p>
</li>
</ul>
</li>
</ul>
<p><strong>Example:</strong></p>
<pre><code class="bash">### Fedora Resource Index
#
# Only one of two values (mulgara) or (blazegraph) can be used below for FEDORA_RESOURCE_INDEX 
# By DEFAULT the value of (mulgara) is used to set which type of Fedora Resource Index can be used
# https://wiki.duraspace.org/display/FEDORA38/Resource+Index
# If you would like to use blazegraph instead, you'll also need to use its image
# https://github.com/Islandora-Collaboration-Group/isle-blazegraph
# Please note: If you mistype or leave this value blank, more than likely Fedora won't work properly.
FEDORA_RESOURCE_INDEX=mulgara

# Set below as a variable for Fedora to start up properly, helps with env-set.sh
FEDORA_WEBAPP_HOME=/usr/local/tomcat/webapps/fedora

## End Fedora Repository
</code></pre>

<ul>
<li>
<p>On the <code>demo</code> and/or <code>local</code> instance, you will have to uncomment the volume at the bottom of the <code>docker-compose.demo.yml</code> or <code>docker-compose.local.yml</code> file to use Blazegraph.</p>
</li>
<li>
<p>Pull down the new isle images</p>
</li>
<li>
<p><code>docker-compose pull</code></p>
</li>
<li>
<p>Spin up new containers</p>
</li>
<li>
<p><code>docker-compose up -d</code></p>
</li>
<li>
<p>Wait a few minutes (<em>3-8 depending on the size of your site</em>) for the site and services to come up.</p>
</li>
</ul>
<h4 id="check-rebuild-fedora-when-using-blazegraph">Check &amp; Rebuild Fedora When Using Blazegraph</h4>
<ul>
<li>
<p>Question: Does Fedora start up properly?</p>
<ul>
<li>Navigate to your domain e.g. http://yourdomain:8081/manager/html</li>
<li>Login using the correct admin / tomcat pw ) (check tomcat.env)</li>
<li>Click on the Fedora link or navigate to http://yourdomain:8081/fedora/objects and click search.</li>
<li>Objects might appear if working but they should only be a small amount of content models at this point.</li>
</ul>
</li>
<li>
<p>If you have switched to Blazegraph, then you'll need to re-index the Fedora repository so that the new Blazegraph triplestore is used instead of the previously used Mulgara triplestore.</p>
<ul>
<li>
<p><strong>WARNING</strong> - With Fedora repositories of 600K+ objects or more, <strong>these indexing processes will take double-digit hours to days</strong> depending on the complexity of the object relationships, ontology, etc. when re-indexing on Staging or Production systems.</p>
</li>
<li>
<p>When re-indexing in this manner, we recommend the use of the <code>screen</code> program which will allow an end-user to disengage from a long continuous bash session and terminal based command without breaking the process. (<em>optional and typically used more often in a Staging and/or Production environment</em>). You may need to install <code>screen</code> on your ISLE host server. Skip this if using on a demo or local instance.</p>
<ul>
<li>Ubuntu - <code>sudo apt-get install screen</code></li>
<li>CentOS - <code>sudo yum install screen</code></li>
</ul>
</li>
<li>
<p>Once installed simply run <code>screen</code> in your terminal. You might be instructed to hit the Spacebar or the Return key to proceed with the <code>screen</code> session.</p>
</li>
<li>
<p><code>docker-exec -it isle-fedora-ld bash</code> (<em>Example for demo and/or local</em>)</p>
</li>
<li>
<p><code>cd utility_scripts</code></p>
</li>
<li>
<p><code>./rebuildFedora.sh</code></p>
</li>
<li>
<p>This process should start spewing out a large column of data</p>
</li>
<li>
<p>To disengage hold down the <code>control</code> key and the <code>a</code> key, then tap the <code>d</code> key. This will get you out of the screen session. </p>
</li>
<li>
<p>To check on the progress, simply type <code>screen -r</code>, check the progress and then disengage again.</p>
</li>
<li>
<p>Once that is complete run the SOLR reindex script</p>
<ul>
<li><code>docker-exec -it isle-fedora-ld bash -c "/bin/sh /utility_scripts/updateSolrIndex.sh</code></li>
</ul>
</li>
</ul>
</li>
<li>
<p>Verify it's working:</p>
<ul>
<li>Navigate to "https://yourdomain" and you can still see the Drupal site. This may take a few minutes depending on the size of the site.</li>
</ul>
</li>
</ul>
<h3 id="check-the-blazegraph-triples-count">Check the Blazegraph Triples Count</h3>
<p>Checking the triples count is an easy way to double-check if objects are being indexed properly and added to Blazegraph's triplestore.</p>
<p>To check the triples count in Blazegraph:</p>
<ul>
<li>
<p>Navigate to the Blazegraph Admin panel http://isle.localdomain:8084/blazegraph/#query</p>
<ul>
<li>Replace <code>isle.localdomain</code> with your real domain when using in a Local, Staging or Production</li>
</ul>
</li>
<li>
<p>Copy and paste the following query into the field with the text (<em>Input a SPARQL query</em>):</p>
</li>
</ul>
<pre><code class="bash">SELECT (COUNT(*) AS ?triples) WHERE {?s ?p ?o}
</code></pre>

<ul>
<li>
<p>Click the <code>Execute</code> button.</p>
</li>
<li>
<p>The output at the bottom will be a numerical value that will look something like:</p>
</li>
</ul>
<pre><code class="bash">-----------
| triples |
| ------- |
| 8280864 |
-----------
</code></pre>

<ul>
<li>This value should increase as more objects are ingested and indexed by Fedora. The difference is that instead of these values being in the previously used Mulgara triplestore, they are now handled by Blazegraph.</li>
</ul>
<hr />
<h2 id="using-blazegraph-the-tick-stack">Using Blazegraph &amp; the TICK Stack</h2>
<ul>
<li>If you're pushing log events to <a href="../tickstack/">TICK</a>, add this snippet of code below (<em>logging instructions</em>) to the bottom of <strong>every</strong> ISLE service within your <code>docker-compose.yml</code> file.</li>
</ul>
<pre><code class="bash">    logging:
      driver: syslog
      options:
        tag: &quot;{{.Name}}&quot;
</code></pre>

<p><strong>Example:</strong></p>
<p>Example is for a Staging instance</p>
<pre><code class="bash">
  isle-blazegraph:
    image: islandoracollabgroup/isle-blazegraph:1.3.0
    container_name: isle-blazegraph-${CONTAINER_SHORT_ID}
    environment:
      - JAVA_MAX_MEM=4096M
      - JAVA_MIN_MEM=1024M
    env_file:
      - staging.env
    networks:
      - isle-internal
    ports:
      - &quot;8084:8080&quot;
    volumes:
      - isle-blazegraph-data:/var/bigdata
    logging:
      driver: syslog
      options:
        tag: &quot;{{.Name}}&quot;
</code></pre>

<hr />
<h2 id="uninstallation-instructions">Uninstallation Instructions</h2>
<ul>
<li>Comment out the <code>isle-blazegraph</code> service again within your <code>docker-compose.*.yml</code> file</li>
<li>Change the the <code>blazegraph</code> back to <code>mulgara</code> within your <code>local.env</code> or <code>demo.env</code> file</li>
<li>Start up the ISLE containers again.</li>
<li>Re-index Fedora following the Fedora re-indexing steps provided in the <code>Check &amp; Rebuild Fedora when using Blazegraph</code> section.</li>
</ul>
<hr />
<h2 id="need-help">Need Help?</h2>
<p>We welcome questions, suggestions, contributions, and respond promptly to requests for technical help. Please join us in the following:</p>
<ul>
<li>
<p><a href="https://github.com/islandora-interest-groups/Islandora-ISLE-Interest-Group">Islandora ISLE Interest Group</a> - Meetings are public and open to everybody!</p>
<ul>
<li><a href="https://github.com/islandora-interest-groups/Islandora-ISLE-Interest-Group/#how-to-join">Schedule</a> is alternating Wednesdays at 3:00pm EST.</li>
</ul>
</li>
<li>
<p><a href="https://groups.google.com/forum/#!forum/islandora-isle">Islandora ISLE Google group</a> - Post your questions here and subscribe for updates, meeting announcements, and technical support.</p>
</li>
<li>
<p><a href="https://github.com/Islandora-Collaboration-Group/ISLE/issues">ISLE GitHub Issues queue</a> - Post your issues, bugs and requests for technical documentation here.</p>
</li>
</ul>
<hr />
<h2 id="additional-resources">Additional Resources</h2>
<ul>
<li><a href="https://wiki.blazegraph.com/wiki/index.php/Main_Page">Blazegraph Documentation</a></li>
</ul>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../automated-testing/" title="Automated Testing" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Automated Testing
              </span>
            </div>
          </a>
        
        
          <a href="../loc-proxy/" title="Loc.gov Proxy" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Loc.gov Proxy
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.39abc4af.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script>
      
        <script src="../../extra.js"></script>
      
    
  </body>
</html>