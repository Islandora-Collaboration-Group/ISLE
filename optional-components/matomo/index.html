
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Documentation for ISLandora Enterprise (ISLE)">
      
      
      
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-7.0.0">
    
    
      
        <title>Matomo Analytics Platform - ISLandora Enterprise (ISLE)</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.a3f8f96a.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.7fa14f5b.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
      <link rel="stylesheet" href="../../extra.css">
    
    
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
      
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#matomo-analytics-package" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="ISLandora Enterprise (ISLE)" class="md-header__button md-logo" aria-label="ISLandora Enterprise (ISLE)">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            ISLandora Enterprise (ISLE)
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Matomo Analytics Platform
            
          </span>
        </div>
      </div>
    </div>
    <div class="md-header__options">
      
    </div>
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    




<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="ISLandora Enterprise (ISLE)" class="md-nav__button md-logo" aria-label="ISLandora Enterprise (ISLE)">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    ISLandora Enterprise (ISLE)
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Get Started
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2" checked>
      
      <label class="md-nav__link" for="nav-2">
        Install ISLE
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Install ISLE" data-md-level="1">
        <label class="md-nav__title" for="nav-2">
          <span class="md-nav__icon md-icon"></span>
          Install ISLE
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../install/host-hardware-requirements/" class="md-nav__link">
        1. Hardware Requirements
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../install/host-software-dependencies/" class="md-nav__link">
        2. Software Dependencies
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../install/install-demo/" class="md-nav__link">
        3. Demo ISLE Installation
      </a>
    </li>
  

          
            
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2-4" type="checkbox" id="nav-2-4" checked>
      
      <label class="md-nav__link" for="nav-2-4">
        4. ISLE Installation
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="4. ISLE Installation" data-md-level="2">
        <label class="md-nav__title" for="nav-2-4">
          <span class="md-nav__icon md-icon"></span>
          4. ISLE Installation
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../install/install-environments/" class="md-nav__link">
        Overview: ISLE Environments
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../install/install-local-new/" class="md-nav__link">
        Local: New Site
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../install/install-local-migrate/" class="md-nav__link">
        Local: Migrate Site
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../install/install-staging-new/" class="md-nav__link">
        Staging: New Site
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../install/install-staging-migrate/" class="md-nav__link">
        Staging: Migrate Site
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../install/install-production-new/" class="md-nav__link">
        Production: New Site
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../install/install-production-migrate/" class="md-nav__link">
        Production: Migrate Site
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../install/install-troubleshooting/" class="md-nav__link">
        Troubleshooting Guide
      </a>
    </li>
  

          
            
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2-4-9" type="checkbox" id="nav-2-4-9" checked>
      
      <label class="md-nav__link" for="nav-2-4-9">
        Optional Components
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Optional Components" data-md-level="3">
        <label class="md-nav__title" for="nav-2-4-9">
          <span class="md-nav__icon md-icon"></span>
          Optional Components
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../components/" class="md-nav__link">
        Overview
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../automated-testing/" class="md-nav__link">
        Automated Testing
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../blazegraph/" class="md-nav__link">
        Blazegraph
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../loc-proxy/" class="md-nav__link">
        Loc.gov Proxy
      </a>
    </li>
  

          
            
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Matomo Analytics Platform
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Matomo Analytics Platform
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#installation" class="md-nav__link">
    Installation
  </a>
  
    <nav class="md-nav" aria-label="Installation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#assumptions" class="md-nav__link">
    Assumptions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#installation-instructions" class="md-nav__link">
    Installation Instructions
  </a>
  
    <nav class="md-nav" aria-label="Installation Instructions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#edit-1-modify-docker-compose-env-files" class="md-nav__link">
    Edit 1: Modify Docker-Compose &amp; .env files
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#install-and-configure-matomo" class="md-nav__link">
    Install and Configure Matomo
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configure-islandora-to-coordinate-with-matomo" class="md-nav__link">
    Configure Islandora to coordinate with Matomo
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing" class="md-nav__link">
    Testing
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#need-help" class="md-nav__link">
    Need Help?
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tickstack/" class="md-nav__link">
        TICK Stack
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../varnish/" class="md-nav__link">
        Varnish
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../update/update/" class="md-nav__link">
        Update ISLE
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4" >
      
      <label class="md-nav__link" for="nav-4">
        Appendices
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Appendices" data-md-level="1">
        <label class="md-nav__title" for="nav-4">
          <span class="md-nav__icon md-icon"></span>
          Appendices
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../appendices/data-persistence/" class="md-nav__link">
        Data Persistence in Docker
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../appendices/glossary/" class="md-nav__link">
        Glossary
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../appendices/installing-module-with-composer/" class="md-nav__link">
        Installing a Drupal Module with Composer
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../appendices/installing-module-with-drush/" class="md-nav__link">
        Installing a Drupal Module with Drush
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="https://docs.google.com/document/d/1r-I9n8mUhlJ5Z-X9AO-RrikhzH6I8bTPIL25LmtRbxE" class="md-nav__link">
        Installing on Google Cloud Platform (Google Doc)
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../appendices/configuring-lets-encrypt/" class="md-nav__link">
        Let's Encrypt: Free SSL Certificates
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../appendices/open-terminal-in-running-container/" class="md-nav__link">
        Opening a Terminal in a Running Container
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../appendices/sample-it-department-request/" class="md-nav__link">
        Sample IT Department Request Letter
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../appendices/server-setups/" class="md-nav__link">
        Sample Server Setups
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../appendices/install-troubleshooting/" class="md-nav__link">
        Troubleshooting
      </a>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4-11" type="checkbox" id="nav-4-11" >
      
      <label class="md-nav__link" for="nav-4-11">
        User Stories
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="User Stories" data-md-level="2">
        <label class="md-nav__title" for="nav-4-11">
          <span class="md-nav__icon md-icon"></span>
          User Stories
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../appendices/user-story-demo-site/" class="md-nav__link">
        Demo ISLE Installation Example User Story
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../appendices/user-story-new-site/" class="md-nav__link">
        New Site Example User Story
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../appendices/user-story-migration-site/" class="md-nav__link">
        Migration Example User Story
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../appendices/redhat/" class="md-nav__link">
        Warning about Red Hat Install
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5" >
      
      <label class="md-nav__link" for="nav-5">
        Cookbook Recipes
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Cookbook Recipes" data-md-level="1">
        <label class="md-nav__title" for="nav-5">
          <span class="md-nav__icon md-icon"></span>
          Cookbook Recipes
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../cookbook-recipes/isle-cheatsheet-docker-commands/" class="md-nav__link">
        ISLE Cheat Sheet: Docker Commands
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../cookbook-recipes/multi_importer_installation/" class="md-nav__link">
        Setting Up and Testing the Islandora Multi Importer (IMI) Module
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../cookbook-recipes/example-aws-configuration/" class="md-nav__link">
        Example AWS Storage Configuration
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../cookbook-recipes/boot-from-external-drive/" class="md-nav__link">
        How to Boot From External Drive
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../cookbook-recipes/isle-v140-git-cleanup/" class="md-nav__link">
        Cleanup ISLE git repository for Release v.1.4.0
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../cookbook-recipes/previous-release-docs/" class="md-nav__link">
        Finding and Using Documentation for a Previous Release
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6" >
      
      <label class="md-nav__link" for="nav-6">
        Specifications
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Specifications" data-md-level="1">
        <label class="md-nav__title" for="nav-6">
          <span class="md-nav__icon md-icon"></span>
          Specifications
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../specifications/resource-matrix/" class="md-nav__link">
        Resource Allocation
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7" >
      
      <label class="md-nav__link" for="nav-7">
        About
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="About" data-md-level="1">
        <label class="md-nav__title" for="nav-7">
          <span class="md-nav__icon md-icon"></span>
          About
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../about/about-isle/" class="md-nav__link">
        About ISLE
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../about/contributing/" class="md-nav__link">
        Contributing to ISLE
      </a>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-7-3" type="checkbox" id="nav-7-3" >
      
      <label class="md-nav__link" for="nav-7-3">
        Contributor Docs
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Contributor Docs" data-md-level="2">
        <label class="md-nav__title" for="nav-7-3">
          <span class="md-nav__icon md-icon"></span>
          Contributor Docs
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../contributor-docs/mkdocs/" class="md-nav__link">
        Docs: MkDocs
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../contributor-docs/spell-checker/" class="md-nav__link">
        Docs: Spell Checker
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../contributor-docs/style-guide/" class="md-nav__link">
        Docs: Style Guide
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../contributor-docs/testing-guide/" class="md-nav__link">
        Testing Guide
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../about/get-help/" class="md-nav__link">
        Get Help
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../contributor-docs/release-process/" class="md-nav__link">
        Release Process
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8" >
      
      <label class="md-nav__link" for="nav-8">
        Release Notes
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Release Notes" data-md-level="1">
        <label class="md-nav__title" for="nav-8">
          <span class="md-nav__icon md-icon"></span>
          Release Notes
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../release-notes/release-1-5-3/" class="md-nav__link">
        Latest release: 1.5.3
      </a>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-8-2" type="checkbox" id="nav-8-2" >
      
      <label class="md-nav__link" for="nav-8-2">
        Previous releases
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Previous releases" data-md-level="2">
        <label class="md-nav__title" for="nav-8-2">
          <span class="md-nav__icon md-icon"></span>
          Previous releases
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../release-notes/release-1-5-2/" class="md-nav__link">
        1.5.2
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../release-notes/release-1-5-1/" class="md-nav__link">
        1.5.1
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../release-notes/release-1-5-0/" class="md-nav__link">
        1.5.0
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../release-notes/release-1-4-2/" class="md-nav__link">
        1.4.2
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../release-notes/release-1-4-1/" class="md-nav__link">
        1.4.1
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../release-notes/release-1-4-0/" class="md-nav__link">
        1.4.0
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../release-notes/release-1-3-0/" class="md-nav__link">
        1.3.0
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../release-notes/release-1-2-0/" class="md-nav__link">
        1.2.0
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../release-notes/release-1-1-2/" class="md-nav__link">
        1.1.2
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../release-notes/release-1-1-1/" class="md-nav__link">
        1.1.1
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../release-notes/release-1-1-0/" class="md-nav__link">
        1.1.0
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#installation" class="md-nav__link">
    Installation
  </a>
  
    <nav class="md-nav" aria-label="Installation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#assumptions" class="md-nav__link">
    Assumptions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#installation-instructions" class="md-nav__link">
    Installation Instructions
  </a>
  
    <nav class="md-nav" aria-label="Installation Instructions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#edit-1-modify-docker-compose-env-files" class="md-nav__link">
    Edit 1: Modify Docker-Compose &amp; .env files
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#install-and-configure-matomo" class="md-nav__link">
    Install and Configure Matomo
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configure-islandora-to-coordinate-with-matomo" class="md-nav__link">
    Configure Islandora to coordinate with Matomo
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing" class="md-nav__link">
    Testing
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#need-help" class="md-nav__link">
    Need Help?
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="matomo-analytics-package">Matomo - Analytics Package</h1>
<h2 id="installation">Installation</h2>
<h3 id="assumptions">Assumptions</h3>
<ul>
<li>
<p>Previously installed and running Local, Production and Staging ISLE Host systems are in place already.</p>
</li>
<li>
<p>You'll need to use the ISLE images tagged as <code>1.3.0</code> and higher.</p>
</li>
</ul>
<hr />
<h3 id="installation-instructions">Installation Instructions</h3>
<p>Adapted from @DiegoPino's original example ISLE config: https://github.com/Islandora-Collaboration-Group/isle_matomo_docker</p>
<h4 id="edit-1-modify-docker-compose-env-files">Edit 1: Modify Docker-Compose &amp; .env files</h4>
<ul>
<li>
<p>Create a <code>data/matomo</code> directory to persist your Matomo application. You will probably want to put this in a git repo if you're deploying to multiple servers and don't want to have to re-install plugins/etc for each environment. We recommend using an appropriate .gitignore before checking that in (e.g. https://raw.githubusercontent.com/matomo-org/matomo/4.x-dev/.gitignore)</p>
</li>
<li>
<p>Copy the files in <code>config/matomo</code> into a new directory <code>data/matomo/config</code> to seed your Matomo application's config. You'll want to commit this to your new Git repo. If you are going to use the instructions below to run Matomo through your main domain (via a /matomo proxy URL) you will need to add <code>proxy_uri_header = 1</code> to your <code>config/config.ini.php</code> file's "General" section.</p>
</li>
<li>
<p>Within your <code>docker-compose.*.yml</code>, add the following blocks to enable new services:</p>
</li>
</ul>
<pre><code class="language-bash">matomo:
  image: matomo:3-fpm
  container_name: isle-matomo-${CONTAINER_SHORT_ID}
  env_file:
    - .env
  networks:
    isle-internal:
  links:
    - mysql
  depends_on:
    - mysql
    - traefik
  volumes:
    - ./data/matomo/html/:/var/www/html
  labels:
    - traefik.enable=false

matomo-nginx:
  image: nginx
  container_name: isle-matomo-nginx-${CONTAINER_SHORT_ID}
  volumes:
    - ./config/matomo-nginx/ngix.conf:/etc/nginx/nginx.conf:ro
    - ./data/matomo/html/:/var/www/html
  links:
    - matomo
  networks:
    - isle-internal
  ports:
    - &quot;9002:9020&quot;
  labels:
    - traefik.enable=true
    - traefik.backend=matomo
    - traefik.frontend.entryPoints=https
    - traefik.port=9020
    - traefik.frontend.passHostHeader=true
    - &quot;traefik.frontend.rule=Host:${BASE_DOMAIN}; PathPrefixStrip: /matomo;&quot;
    - traefik.docker.network==${COMPOSE_PROJECT_NAME}_isle-internal

whoami:
  image: containous/whoami # A container that exposes an API to show its IP address
  container_name: isle-whoami-${CONTAINER_SHORT_ID}
  labels:
    - &quot;traefik.frontend.rule=Host:whoami.${BASE_DOMAIN};&quot;
</code></pre>
<p>Your <code>traefik</code> service ports definition needs modifying like this:</p>
<pre><code class="language-bash">    ports:
      - &quot;80:80&quot;
      - target: 443
        published: 443
        protocol: tcp
        mode: host
      - &quot;8080:8080&quot;
</code></pre>
<p>Your <code>traefik</code> labels definition needs an extra line before the line selecting port 8080:</p>
<pre><code class="language-bash">      - traefik.frontend.passHostHeader=true
</code></pre>
<p>Your <code>apache</code> service needs to have any <code>PathPrefix</code> removed from the frontendrule. It was probably like this:</p>
<p><code>- "traefik.frontend.rule=Host:${BASE_DOMAIN}; PathPrefix: /, /cantaloupe"</code></p>
<p>So now this rule should be changed such that <code>apache</code> doesn't intercept <code>/matomo</code> requests through the main domain. This new edit shouldn't interfere with other ISLE operations:</p>
<p><code>- "traefik.frontend.rule=Host:${BASE_DOMAIN};"</code></p>
<ul>
<li>Start up the ISLE Docker containers again. <code>docker-compose up -d</code></li>
</ul>
<hr />
<h4 id="install-and-configure-matomo">Install and Configure Matomo</h4>
<ol>
<li>
<p>Create your new Matomo database and call it <code>matomo_db</code>. Drush should be able to do this, e.g. <code>drush sql-create --db-su="root" --db-su-pw="MYQSL_ROOT_PWD" --db-url="mysql://DRUPAL_DB_USER:DRUPAL_DB_PWD@mysql/matomo_db"</code>. If you use a different method, ensure that you make a database user and password to access the database rather than using root credentials below.</p>
</li>
<li>
<p>Add <code>&lt;yourdomain&gt;</code> to your <code>/etc/hosts</code> file and visit that URL. You should see a Matomo install dialog at <code>https://&lt;yourdomain&gt;/matomo</code>. Additional support may be found here: https://matomo.org/docs/installation/</p>
</li>
<li>
<p>Use the following values for Database Setup:</p>
</li>
<li>
<p>Database Server: "mysql"</p>
</li>
<li>Login: the value of DRUPAL_DB_USER in your local.env file</li>
<li>Password: the value of DRUPAL_DB_PASS in your local.env file</li>
<li>Database Name: "matomo_db"</li>
<li>Table Prefix: "matomo_"</li>
<li>Adapter: PDO\MYSQL</li>
</ol>
<p>This creates files in a config folder and you'll need to do this for each environment or manually copy (or use Git to sync) those files between environments.</p>
<ol>
<li>
<p>Click "Next" a couple times until you get to the "Super User" creation page. Enter (and save!) credentials for your Matomo login.</p>
</li>
<li>
<p>The next screen prompts you to "Setup a Website". Enter your website name ("Islandora" is good, if you're planning on following the LASIR instructions for integrating with Islandora), the URL you're using for the environment you're in, and a timezone. Select "Not an Ecommerce site".</p>
</li>
<li>
<p>The next screen will provide you with a tracking code block. Copy it out for use later, or plan to log into the Matomo dashboard later to fetch it again.</p>
</li>
<li>
<p>Log in. Allow Matomo to update if it wants to. You may have to do this in order to access the settings areas.</p>
</li>
<li>
<p>Don't forget to check in all the new files in your Matomo Git repo, if you're tracking it that way.</p>
</li>
</ol>
<hr />
<h4 id="configure-islandora-to-coordinate-with-matomo">Configure Islandora to coordinate with Matomo</h4>
<p>Now you can pick up from here: https://github.com/Islandora-Collaboration-Group/islandora_matomo#setup-matomo-for-this-module</p>
<p>Important sub-steps:</p>
<ol>
<li>
<p>Create an extra "website" if you need to track Authors/Department data.</p>
</li>
<li>
<p>Install the "Plugin" for "Custom Dimensions" to enable Islandora integration.</p>
</li>
<li>
<p>Add the "Custom Dimensions" in the order requested</p>
</li>
<li>
<p>Fetch your API code to paste into Islandora admin. </p>
</li>
</ol>
<hr />
<h3 id="testing">Testing</h3>
<hr />
<h2 id="need-help">Need Help?</h2>
<p>We welcome questions, suggestions, contributions, and respond promptly to requests for technical help. Please join us in the following:</p>
<ul>
<li>
<p><a href="https://github.com/islandora-interest-groups/Islandora-ISLE-Interest-Group">Islandora ISLE Interest Group</a> - Meetings are public and open to everybody! <a href="https://github.com/islandora-interest-groups/Islandora-ISLE-Interest-Group/#how-to-join">Schedule</a></p>
</li>
<li>
<p><a href="https://groups.google.com/forum/#!forum/islandora-isle">Islandora ISLE Google group</a> - Post your questions here and subscribe for updates, meeting announcements, and technical support.</p>
</li>
<li>
<p><a href="https://github.com/Islandora-Collaboration-Group/ISLE/issues">ISLE GitHub Issues queue</a> - Post your issues, bugs and requests for technical documentation here.</p>
</li>
</ul>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        <a href="../loc-proxy/" class="md-footer__link md-footer__link--prev" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Loc.gov Proxy
            </div>
          </div>
        </a>
      
      
        <a href="../tickstack/" class="md-footer__link md-footer__link--next" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              TICK Stack
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": [], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}, "search": "../../assets/javascripts/workers/search.217ffd95.min.js", "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.926459b3.min.js"></script>
      
        <script src="../../extra.js"></script>
      
    
  </body>
</html>