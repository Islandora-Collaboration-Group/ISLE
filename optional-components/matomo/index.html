



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Documentation for ISLandora Enterprise (ISLE)">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0, mkdocs-material-3.0.3">
    
    
      
        <title>Matomo Analytics Platform - ISLandora Enterprise (ISLE)</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.451f80e5.css">
      
      
    
    
      <script src="../../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
      
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
      <link rel="stylesheet" href="../../extra.css">
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="../../#matomo-analytics-package" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../.." title="ISLandora Enterprise (ISLE)" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                ISLandora Enterprise (ISLE)
              </span>
              <span class="md-header-nav__topic">
                Matomo Analytics Platform
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../.." title="ISLandora Enterprise (ISLE)" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    ISLandora Enterprise (ISLE)
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Get Started" class="md-nav__link">
      Get Started
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2" checked>
    
    <label class="md-nav__link" for="nav-2">
      Install ISLE
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Install ISLE
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../install/host-hardware-requirements/" title="1. Hardware Requirements" class="md-nav__link">
      1. Hardware Requirements
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../install/host-software-dependencies/" title="2. Software Dependencies" class="md-nav__link">
      2. Software Dependencies
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../install/install-demo/" title="3. Demo ISLE Installation" class="md-nav__link">
      3. Demo ISLE Installation
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-4" type="checkbox" id="nav-2-4" checked>
    
    <label class="md-nav__link" for="nav-2-4">
      4. ISLE Installation
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-4">
        4. ISLE Installation
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../install/install-environments/" title="Overview: ISLE Environments" class="md-nav__link">
      Overview: ISLE Environments
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../install/install-local-new/" title="Local: New Site" class="md-nav__link">
      Local: New Site
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../install/install-local-migrate/" title="Local: Migrate Site" class="md-nav__link">
      Local: Migrate Site
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../install/install-staging-new/" title="Staging: New Site" class="md-nav__link">
      Staging: New Site
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../install/install-staging-migrate/" title="Staging: Migrate Site" class="md-nav__link">
      Staging: Migrate Site
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../install/install-production-new/" title="Production: New Site" class="md-nav__link">
      Production: New Site
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../install/install-production-migrate/" title="Production: Migrate Site" class="md-nav__link">
      Production: Migrate Site
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../install/install-troubleshooting/" title="Troubleshooting Guide" class="md-nav__link">
      Troubleshooting Guide
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-4-9" type="checkbox" id="nav-2-4-9" checked>
    
    <label class="md-nav__link" for="nav-2-4-9">
      Optional Components
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-2-4-9">
        Optional Components
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../components/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../automated-testing/" title="Automated Testing" class="md-nav__link">
      Automated Testing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../blazegraph/" title="Blazegraph" class="md-nav__link">
      Blazegraph
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../loc-proxy/" title="Loc.gov Proxy" class="md-nav__link">
      Loc.gov Proxy
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Matomo Analytics Platform
      </label>
    
    <a href="./" title="Matomo Analytics Platform" class="md-nav__link md-nav__link--active">
      Matomo Analytics Platform
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#installation" title="Installation" class="md-nav__link">
    Installation
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#assumptions" title="Assumptions" class="md-nav__link">
    Assumptions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#installation-instructions" title="Installation Instructions" class="md-nav__link">
    Installation Instructions
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#edit-1-modify-docker-compose-env-files" title="Edit 1: Modify Docker-Compose &amp; .env files" class="md-nav__link">
    Edit 1: Modify Docker-Compose &amp; .env files
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#install-and-configure-matomo" title="Install and Configure Matomo" class="md-nav__link">
    Install and Configure Matomo
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configure-islandora-to-coordinate-with-matomo" title="Configure Islandora to coordinate with Matomo" class="md-nav__link">
    Configure Islandora to coordinate with Matomo
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing" title="Testing" class="md-nav__link">
    Testing
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#need-help" title="Need Help?" class="md-nav__link">
    Need Help?
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tickstack/" title="TICK Stack" class="md-nav__link">
      TICK Stack
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../varnish/" title="Varnish" class="md-nav__link">
      Varnish
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../update/update/" title="Update ISLE" class="md-nav__link">
      Update ISLE
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Appendices
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Appendices
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../appendices/data-persistence/" title="Data Persistence in Docker" class="md-nav__link">
      Data Persistence in Docker
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../appendices/glossary/" title="Glossary" class="md-nav__link">
      Glossary
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../appendices/installing-module-with-composer/" title="Installing a Drupal Module with Composer" class="md-nav__link">
      Installing a Drupal Module with Composer
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../appendices/installing-module-with-drush/" title="Installing a Drupal Module with Drush" class="md-nav__link">
      Installing a Drupal Module with Drush
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="https://docs.google.com/document/d/1r-I9n8mUhlJ5Z-X9AO-RrikhzH6I8bTPIL25LmtRbxE" title="Installing on Google Cloud Platform (Google Doc)" class="md-nav__link">
      Installing on Google Cloud Platform (Google Doc)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../appendices/configuring-lets-encrypt/" title="Let's Encrypt: Free SSL Certificates" class="md-nav__link">
      Let's Encrypt: Free SSL Certificates
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../appendices/open-terminal-in-running-container/" title="Opening a Terminal in a Running Container" class="md-nav__link">
      Opening a Terminal in a Running Container
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../appendices/sample-it-department-request/" title="Sample IT Department Request Letter" class="md-nav__link">
      Sample IT Department Request Letter
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../appendices/server-setups/" title="Sample Server Setups" class="md-nav__link">
      Sample Server Setups
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../appendices/install-troubleshooting/" title="Troubleshooting" class="md-nav__link">
      Troubleshooting
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../appendices/redhat/" title="Warning about Red Hat Install" class="md-nav__link">
      Warning about Red Hat Install
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Cookbook Recipes
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Cookbook Recipes
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../cookbook-recipes/isle-cheatsheet-docker-commands/" title="ISLE Cheat Sheet: Docker Commands" class="md-nav__link">
      ISLE Cheat Sheet: Docker Commands
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cookbook-recipes/multi_importer_installation/" title="Setting Up and Testing the Islandora Multi Importer (IMI) Module" class="md-nav__link">
      Setting Up and Testing the Islandora Multi Importer (IMI) Module
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cookbook-recipes/example-aws-configuration/" title="Example AWS Storage Configuration" class="md-nav__link">
      Example AWS Storage Configuration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cookbook-recipes/boot-from-external-drive/" title="How to Boot From External Drive" class="md-nav__link">
      How to Boot From External Drive
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cookbook-recipes/isle-v140-git-cleanup/" title="Cleanup ISLE git repository for Release v.1.4.0" class="md-nav__link">
      Cleanup ISLE git repository for Release v.1.4.0
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cookbook-recipes/previous-release-docs/" title="Finding and Using Documentation for a Previous Release" class="md-nav__link">
      Finding and Using Documentation for a Previous Release
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Specifications
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Specifications
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../specifications/resource-matrix/" title="Resource Allocation" class="md-nav__link">
      Resource Allocation
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      About
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        About
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../about/about-isle/" title="About ISLE" class="md-nav__link">
      About ISLE
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../about/contributing/" title="Contributing to ISLE" class="md-nav__link">
      Contributing to ISLE
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-3" type="checkbox" id="nav-7-3">
    
    <label class="md-nav__link" for="nav-7-3">
      Contributor Docs
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-7-3">
        Contributor Docs
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../contributor-docs/mkdocs/" title="Docs: MkDocs" class="md-nav__link">
      Docs: MkDocs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../contributor-docs/spell-checker/" title="Docs: Spell Checker" class="md-nav__link">
      Docs: Spell Checker
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../contributor-docs/style-guide/" title="Docs: Style Guide" class="md-nav__link">
      Docs: Style Guide
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../contributor-docs/testing-guide/" title="Testing Guide" class="md-nav__link">
      Testing Guide
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../about/get-help/" title="Get Help" class="md-nav__link">
      Get Help
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../contributor-docs/release-process/" title="Release Process" class="md-nav__link">
      Release Process
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8">
    
    <label class="md-nav__link" for="nav-8">
      Release Notes
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        Release Notes
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../release-notes/release-1-5-6/" title="Latest release: 1.5.6" class="md-nav__link">
      Latest release: 1.5.6
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8-2" type="checkbox" id="nav-8-2">
    
    <label class="md-nav__link" for="nav-8-2">
      Previous releases
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-8-2">
        Previous releases
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../release-notes/release-1-5-5/" title="1.5.5" class="md-nav__link">
      1.5.5
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release-notes/release-1-5-4/" title="1.5.4" class="md-nav__link">
      1.5.4
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release-notes/release-1-5-3/" title="1.5.3" class="md-nav__link">
      1.5.3
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release-notes/release-1-5-2/" title="1.5.2" class="md-nav__link">
      1.5.2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release-notes/release-1-5-1/" title="1.5.1" class="md-nav__link">
      1.5.1
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release-notes/release-1-5-0/" title="1.5.0" class="md-nav__link">
      1.5.0
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release-notes/release-1-4-2/" title="1.4.2" class="md-nav__link">
      1.4.2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release-notes/release-1-4-1/" title="1.4.1" class="md-nav__link">
      1.4.1
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release-notes/release-1-4-0/" title="1.4.0" class="md-nav__link">
      1.4.0
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release-notes/release-1-3-0/" title="1.3.0" class="md-nav__link">
      1.3.0
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release-notes/release-1-2-0/" title="1.2.0" class="md-nav__link">
      1.2.0
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release-notes/release-1-1-2/" title="1.1.2" class="md-nav__link">
      1.1.2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release-notes/release-1-1-1/" title="1.1.1" class="md-nav__link">
      1.1.1
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release-notes/release-1-1-0/" title="1.1.0" class="md-nav__link">
      1.1.0
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#installation" title="Installation" class="md-nav__link">
    Installation
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#assumptions" title="Assumptions" class="md-nav__link">
    Assumptions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#installation-instructions" title="Installation Instructions" class="md-nav__link">
    Installation Instructions
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#edit-1-modify-docker-compose-env-files" title="Edit 1: Modify Docker-Compose &amp; .env files" class="md-nav__link">
    Edit 1: Modify Docker-Compose &amp; .env files
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#install-and-configure-matomo" title="Install and Configure Matomo" class="md-nav__link">
    Install and Configure Matomo
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configure-islandora-to-coordinate-with-matomo" title="Configure Islandora to coordinate with Matomo" class="md-nav__link">
    Configure Islandora to coordinate with Matomo
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing" title="Testing" class="md-nav__link">
    Testing
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#need-help" title="Need Help?" class="md-nav__link">
    Need Help?
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="matomo-analytics-package">Matomo - Analytics Package</h1>
<h2 id="installation">Installation</h2>
<h3 id="assumptions">Assumptions</h3>
<ul>
<li>
<p>Previously installed and running Local, Production and Staging ISLE Host systems are in place already.</p>
</li>
<li>
<p>You'll need to use the ISLE images tagged as <code>1.3.0</code> and higher.</p>
</li>
</ul>
<hr />
<h3 id="installation-instructions">Installation Instructions</h3>
<p>Adapted from @DiegoPino's original example ISLE config: https://github.com/Islandora-Collaboration-Group/isle_matomo_docker</p>
<h4 id="edit-1-modify-docker-compose-env-files">Edit 1: Modify Docker-Compose &amp; .env files</h4>
<ul>
<li>
<p>Create a <code>data/matomo</code> directory to persist your Matomo application. You will probably want to put this in a git repo if you're deploying to multiple servers and don't want to have to re-install plugins/etc for each environment. We recommend using an appropriate .gitignore before checking that in (e.g. https://raw.githubusercontent.com/matomo-org/matomo/4.x-dev/.gitignore)</p>
</li>
<li>
<p>Copy the files in <code>config/matomo</code> into a new directory <code>data/matomo/config</code> to seed your Matomo application's config. You'll want to commit this to your new Git repo. If you are going to use the instructions below to run Matomo through your main domain (via a /matomo proxy URL) you will need to add <code>proxy_uri_header = 1</code> to your <code>config/config.ini.php</code> file's "General" section.</p>
</li>
<li>
<p>Within your <code>docker-compose.*.yml</code>, add the following blocks to enable new services:</p>
</li>
</ul>
<pre><code class="bash">matomo:
  image: matomo:3-fpm
  container_name: isle-matomo-${CONTAINER_SHORT_ID}
  env_file:
    - .env
  networks:
    isle-internal:
  links:
    - mysql
  depends_on:
    - mysql
    - traefik
  volumes:
    - ./data/matomo/html/:/var/www/html
  labels:
    - traefik.enable=false

matomo-nginx:
  image: nginx
  container_name: isle-matomo-nginx-${CONTAINER_SHORT_ID}
  volumes:
    - ./config/matomo-nginx/ngix.conf:/etc/nginx/nginx.conf:ro
    - ./data/matomo/html/:/var/www/html
  links:
    - matomo
  networks:
    - isle-internal
  ports:
    - &quot;9002:9020&quot;
  labels:
    - traefik.enable=true
    - traefik.backend=matomo
    - traefik.frontend.entryPoints=https
    - traefik.port=9020
    - traefik.frontend.passHostHeader=true
    - &quot;traefik.frontend.rule=Host:${BASE_DOMAIN}; PathPrefixStrip: /matomo;&quot;
    - traefik.docker.network==${COMPOSE_PROJECT_NAME}_isle-internal

whoami:
  image: containous/whoami # A container that exposes an API to show its IP address
  container_name: isle-whoami-${CONTAINER_SHORT_ID}
  labels:
    - &quot;traefik.frontend.rule=Host:whoami.${BASE_DOMAIN};&quot;
</code></pre>

<p>Your <code>traefik</code> service ports definition needs modifying like this:</p>
<pre><code class="bash">    ports:
      - &quot;80:80&quot;
      - target: 443
        published: 443
        protocol: tcp
        mode: host
      - &quot;8080:8080&quot;
</code></pre>

<p>Your <code>traefik</code> labels definition needs an extra line before the line selecting port 8080:</p>
<pre><code class="bash">      - traefik.frontend.passHostHeader=true
</code></pre>

<p>Your <code>apache</code> service needs to have any <code>PathPrefix</code> removed from the frontendrule. It was probably like this:</p>
<p><code>- "traefik.frontend.rule=Host:${BASE_DOMAIN}; PathPrefix: /, /cantaloupe"</code></p>
<p>So now this rule should be changed such that <code>apache</code> doesn't intercept <code>/matomo</code> requests through the main domain. This new edit shouldn't interfere with other ISLE operations:</p>
<p><code>- "traefik.frontend.rule=Host:${BASE_DOMAIN};"</code></p>
<ul>
<li>Start up the ISLE Docker containers again. <code>docker-compose up -d</code></li>
</ul>
<hr />
<h4 id="install-and-configure-matomo">Install and Configure Matomo</h4>
<ol>
<li>
<p>Create your new Matomo database and call it <code>matomo_db</code>. Drush should be able to do this, e.g. <code>drush sql-create --db-su="root" --db-su-pw="MYQSL_ROOT_PWD" --db-url="mysql://DRUPAL_DB_USER:DRUPAL_DB_PWD@mysql/matomo_db"</code>. If you use a different method, ensure that you make a database user and password to access the database rather than using root credentials below.</p>
</li>
<li>
<p>Add <code>&lt;yourdomain&gt;</code> to your <code>/etc/hosts</code> file and visit that URL. You should see a Matomo install dialog at <code>https://&lt;yourdomain&gt;/matomo</code>. Additional support may be found here: https://matomo.org/docs/installation/</p>
</li>
<li>
<p>Use the following values for Database Setup:</p>
</li>
<li>
<p>Database Server: "mysql"</p>
</li>
<li>Login: the value of DRUPAL_DB_USER in your local.env file</li>
<li>Password: the value of DRUPAL_DB_PASS in your local.env file</li>
<li>Database Name: "matomo_db"</li>
<li>Table Prefix: "matomo_"</li>
<li>Adapter: PDO\MYSQL</li>
</ol>
<p>This creates files in a config folder and you'll need to do this for each environment or manually copy (or use Git to sync) those files between environments.</p>
<ol>
<li>
<p>Click "Next" a couple times until you get to the "Super User" creation page. Enter (and save!) credentials for your Matomo login.</p>
</li>
<li>
<p>The next screen prompts you to "Setup a Website". Enter your website name ("Islandora" is good, if you're planning on following the LASIR instructions for integrating with Islandora), the URL you're using for the environment you're in, and a timezone. Select "Not an Ecommerce site".</p>
</li>
<li>
<p>The next screen will provide you with a tracking code block. Copy it out for use later, or plan to log into the Matomo dashboard later to fetch it again.</p>
</li>
<li>
<p>Log in. Allow Matomo to update if it wants to. You may have to do this in order to access the settings areas.</p>
</li>
<li>
<p>Don't forget to check in all the new files in your Matomo Git repo, if you're tracking it that way.</p>
</li>
</ol>
<hr />
<h4 id="configure-islandora-to-coordinate-with-matomo">Configure Islandora to coordinate with Matomo</h4>
<p>Now you can pick up from here: https://github.com/Islandora-Collaboration-Group/islandora_matomo#setup-matomo-for-this-module</p>
<p>Important sub-steps:</p>
<ol>
<li>
<p>Create an extra "website" if you need to track Authors/Department data.</p>
</li>
<li>
<p>Install the "Plugin" for "Custom Dimensions" to enable Islandora integration.</p>
</li>
<li>
<p>Add the "Custom Dimensions" in the order requested</p>
</li>
<li>
<p>Fetch your API code to paste into Islandora admin. </p>
</li>
</ol>
<hr />
<h3 id="testing">Testing</h3>
<hr />
<h2 id="need-help">Need Help?</h2>
<p>We welcome questions, suggestions, contributions, and respond promptly to requests for technical help. Please join us in the following:</p>
<ul>
<li>
<p><a href="https://github.com/islandora-interest-groups/Islandora-ISLE-Interest-Group">Islandora ISLE Interest Group</a> - Meetings are public and open to everybody! <a href="https://github.com/islandora-interest-groups/Islandora-ISLE-Interest-Group/#how-to-join">Schedule</a></p>
</li>
<li>
<p><a href="https://groups.google.com/forum/#!forum/islandora-isle">Islandora ISLE Google group</a> - Post your questions here and subscribe for updates, meeting announcements, and technical support.</p>
</li>
<li>
<p><a href="https://github.com/Islandora-Collaboration-Group/ISLE/issues">ISLE GitHub Issues queue</a> - Post your issues, bugs and requests for technical documentation here.</p>
</li>
</ul>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../loc-proxy/" title="Loc.gov Proxy" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Loc.gov Proxy
              </span>
            </div>
          </a>
        
        
          <a href="../tickstack/" title="TICK Stack" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                TICK Stack
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.583bbe55.js"></script>
      
      <script>app.initialize({version:"1.0",url:{base:"../.."}})</script>
      
        <script src="../../extra.js"></script>
      
    
    
      
    
  </body>
</html>