



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Documentation for Islandora Enterprise (ISLE)">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0, mkdocs-material-3.0.3">
    
    
      
        <title>Migrate to ISLE Environment - Islandora Enterprise (ISLE)</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.451f80e5.css">
      
      
    
    
      <script src="../../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
      
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
      <link rel="stylesheet" href="../../extra.css">
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="../../#migrate-to-isle-environment" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../.." title="Islandora Enterprise (ISLE)" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                Islandora Enterprise (ISLE)
              </span>
              <span class="md-header-nav__topic">
                Migrate to ISLE Environment
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../.." title="Islandora Enterprise (ISLE)" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    Islandora Enterprise (ISLE)
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Get Started" class="md-nav__link">
      Get Started
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Install ISLE
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Install ISLE
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../install/host-hardware-requirements/" title="1. Hardware Requirements" class="md-nav__link">
      1. Hardware Requirements
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../install/host-software-dependencies/" title="2. Software Dependencies" class="md-nav__link">
      2. Software Dependencies
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../install/install-demo/" title="3. Demo ISLE Installation" class="md-nav__link">
      3. Demo ISLE Installation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../install/install-server/" title="4. Remote Server ISLE Installation" class="md-nav__link">
      4. Remote Server ISLE Installation
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../update/update/" title="Update ISLE" class="md-nav__link">
      Update ISLE
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4" checked>
    
    <label class="md-nav__link" for="nav-4">
      Migrate Existing Site to ISLE
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Migrate Existing Site to ISLE
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Migrate to ISLE Environment
      </label>
    
    <a href="./" title="Migrate to ISLE Environment" class="md-nav__link md-nav__link--active">
      Migrate to ISLE Environment
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#assumptions-prerequisites" title="Assumptions / Prerequisites" class="md-nav__link">
    Assumptions / Prerequisites
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#this-section-is-in-development-please-come-back-soon" title="THIS SECTION IS IN DEVELOPMENT. PLEASE COME BACK SOON." class="md-nav__link">
    THIS SECTION IS IN DEVELOPMENT. PLEASE COME BACK SOON.
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#migrate-only-finding-usernames-and-passwords" title="Migrate Only: Finding Usernames and Passwords" class="md-nav__link">
    Migrate Only: Finding Usernames and Passwords
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create-data-storage-directory" title="Create Data Storage Directory" class="md-nav__link">
    Create Data Storage Directory
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#migration-export-checklist" title="Migration Export Checklist" class="md-nav__link">
    Migration Export Checklist
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#migration-merge-checklist" title="Migration Merge Checklist" class="md-nav__link">
    Migration Merge Checklist
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#final-steps" title="Final Steps" class="md-nav__link">
    Final Steps
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#clone-custom-configuration-to-host-server" title="Clone Custom Configuration to Host Server" class="md-nav__link">
    Clone Custom Configuration to Host Server
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#spin-up-isle-containers" title="Spin up ISLE Containers" class="md-nav__link">
    Spin up ISLE Containers
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#review-or-pull-down-isle-docker-images" title="Review or Pull Down ISLE Docker Images" class="md-nav__link">
    Review or Pull Down ISLE Docker Images
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#spin-up-the-proxy-container" title="Spin Up the Proxy Container" class="md-nav__link">
    Spin Up the Proxy Container
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#spin-up-the-mysql-container-and-import-production-databases" title="Spin up the MySQL Container and Import Production Database(s)" class="md-nav__link">
    Spin up the MySQL Container and Import Production Database(s)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#spin-up-the-fedora-container-and-start-the-reindex-processes" title="Spin up the Fedora Container and Start the Reindex Processes" class="md-nav__link">
    Spin up the Fedora Container and Start the Reindex Processes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#spin-up-apache-container" title="Spin up Apache Container" class="md-nav__link">
    Spin up Apache Container
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#spin-up-solr-container-and-complete-the-reindex-processes" title="Spin Up Solr Container and Complete the Reindex Processes" class="md-nav__link">
    Spin Up Solr Container and Complete the Reindex Processes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../export-checklist/" title="Migration Export Checklist" class="md-nav__link">
      Migration Export Checklist
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../merge-checklist/" title="Migration Merge Checklist" class="md-nav__link">
      Migration Merge Checklist
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../reindex-process/" title="Migration Reindex Process" class="md-nav__link">
      Migration Reindex Process
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Appendices
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Appendices
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../appendices/data-persistence/" title="Data Persistence in Docker" class="md-nav__link">
      Data Persistence in Docker
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../appendices/glossary/" title="Glossary" class="md-nav__link">
      Glossary
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../appendices/installing-module-with-composer/" title="Installing a Drupal Module with Composer" class="md-nav__link">
      Installing a Drupal Module with Composer
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../appendices/installing-module-with-drush/" title="Installing a Drupal Module with Drush" class="md-nav__link">
      Installing a Drupal Module with Drush
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="https://docs.google.com/document/d/1r-I9n8mUhlJ5Z-X9AO-RrikhzH6I8bTPIL25LmtRbxE" title="Installing on Google Cloud Platform (Google Doc)" class="md-nav__link">
      Installing on Google Cloud Platform (Google Doc)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../appendices/open-terminal-in-running-container/" title="Opening a Terminal in a Running Container" class="md-nav__link">
      Opening a Terminal in a Running Container
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../appendices/sample-it-department-request/" title="Sample IT Department Request Letter" class="md-nav__link">
      Sample IT Department Request Letter
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../appendices/install-troubleshooting/" title="Troubleshooting" class="md-nav__link">
      Troubleshooting
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-9" type="checkbox" id="nav-5-9">
    
    <label class="md-nav__link" for="nav-5-9">
      User Stories
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-5-9">
        User Stories
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../appendices/user-story-demo-site/" title="Demo ISLE Installation Example User Story" class="md-nav__link">
      Demo ISLE Installation Example User Story
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../appendices/user-story-new-site/" title="New Site Example User Story" class="md-nav__link">
      New Site Example User Story
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../appendices/user-story-migration-site/" title="Migration Example User Story" class="md-nav__link">
      Migration Example User Story
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../appendices/configuring-lets-encrypt/" title="Let's Encrypt: Free SSL Certificates" class="md-nav__link">
      Let's Encrypt: Free SSL Certificates
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../appendices/redhat/" title="Warning about Red Hat Install" class="md-nav__link">
      Warning about Red Hat Install
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Cookbook Recipes
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Cookbook Recipes
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../cookbook-recipes/isle-cheatsheet-docker-commands/" title="ISLE Cheat Sheet: Docker Commands" class="md-nav__link">
      ISLE Cheat Sheet: Docker Commands
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      About
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        About
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../about/contributing/" title="Contributing to ISLE" class="md-nav__link">
      Contributing to ISLE
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../about/about-isle/" title="About ISLE" class="md-nav__link">
      About ISLE
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../about/committers/" title="About Committers" class="md-nav__link">
      About Committers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-4" type="checkbox" id="nav-7-4">
    
    <label class="md-nav__link" for="nav-7-4">
      Contributor Docs
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-7-4">
        Contributor Docs
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../contributor-docs/mkdocs/" title="Docs: MkDocs" class="md-nav__link">
      Docs: MkDocs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../contributor-docs/spell-checker/" title="Docs: Spell Checker" class="md-nav__link">
      Docs: Spell Checker
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../contributor-docs/style-guide/" title="Docs: Style Guide" class="md-nav__link">
      Docs: Style Guide
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../contributor-docs/release-process/" title="Release Process" class="md-nav__link">
      Release Process
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../contributor-docs/testing-guide/" title="Testing Guide" class="md-nav__link">
      Testing Guide
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../about/get-help/" title="Get Help" class="md-nav__link">
      Get Help
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8">
    
    <label class="md-nav__link" for="nav-8">
      Release Notes
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        Release Notes
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../release-notes/release-1-1-2/" title="Latest release: 1.1.2" class="md-nav__link">
      Latest release: 1.1.2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8-2" type="checkbox" id="nav-8-2">
    
    <label class="md-nav__link" for="nav-8-2">
      Previous releases
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-8-2">
        Previous releases
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../release-notes/release-1-1-0/" title="1.1.0" class="md-nav__link">
      1.1.0
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release-notes/release-1-1-1/" title="1.1.1" class="md-nav__link">
      1.1.1
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#assumptions-prerequisites" title="Assumptions / Prerequisites" class="md-nav__link">
    Assumptions / Prerequisites
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#this-section-is-in-development-please-come-back-soon" title="THIS SECTION IS IN DEVELOPMENT. PLEASE COME BACK SOON." class="md-nav__link">
    THIS SECTION IS IN DEVELOPMENT. PLEASE COME BACK SOON.
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#migrate-only-finding-usernames-and-passwords" title="Migrate Only: Finding Usernames and Passwords" class="md-nav__link">
    Migrate Only: Finding Usernames and Passwords
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create-data-storage-directory" title="Create Data Storage Directory" class="md-nav__link">
    Create Data Storage Directory
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#migration-export-checklist" title="Migration Export Checklist" class="md-nav__link">
    Migration Export Checklist
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#migration-merge-checklist" title="Migration Merge Checklist" class="md-nav__link">
    Migration Merge Checklist
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#final-steps" title="Final Steps" class="md-nav__link">
    Final Steps
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#clone-custom-configuration-to-host-server" title="Clone Custom Configuration to Host Server" class="md-nav__link">
    Clone Custom Configuration to Host Server
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#spin-up-isle-containers" title="Spin up ISLE Containers" class="md-nav__link">
    Spin up ISLE Containers
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#review-or-pull-down-isle-docker-images" title="Review or Pull Down ISLE Docker Images" class="md-nav__link">
    Review or Pull Down ISLE Docker Images
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#spin-up-the-proxy-container" title="Spin Up the Proxy Container" class="md-nav__link">
    Spin Up the Proxy Container
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#spin-up-the-mysql-container-and-import-production-databases" title="Spin up the MySQL Container and Import Production Database(s)" class="md-nav__link">
    Spin up the MySQL Container and Import Production Database(s)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#spin-up-the-fedora-container-and-start-the-reindex-processes" title="Spin up the Fedora Container and Start the Reindex Processes" class="md-nav__link">
    Spin up the Fedora Container and Start the Reindex Processes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#spin-up-apache-container" title="Spin up Apache Container" class="md-nav__link">
    Spin up Apache Container
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#spin-up-solr-container-and-complete-the-reindex-processes" title="Spin Up Solr Container and Complete the Reindex Processes" class="md-nav__link">
    Spin Up Solr Container and Complete the Reindex Processes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="migrate-to-isle-environment">Migrate to ISLE Environment</h1>
<p><em>Expectations:  It may take at least <strong>8 hours or more</strong> to read this documentation and complete this installation. Please proceed slowly.</em></p>
<p>This will help you migrate your existing production Islandora 7.x environment to an ISLE environment for easily maintaining Islandora. This documentation will help you identify and copy your institution's preexisting Islandora data, files, and themes (including your data volume, Drupal site(s) and theme(s), and commonly customized xml and xslt files) to your ISLE environment.</p>
<p>Please post questions to the public <a href="https://groups.google.com/forum/#!forum/islandora-isle">Islandora ISLE Google group</a>, or subscribe to receive emails. The <a href="../../appendices/glossary/">Glossary</a> defines terms used in this documentation.</p>
<hr />
<h2 id="assumptions-prerequisites">Assumptions / Prerequisites</h2>
<ul>
<li>
<p>You have already completed the <a href="../../install/host-hardware-requirements/">Hardware Requirements</a>, <a href="../../install/host-software-dependencies/">Software Dependencies</a> for your host server, and <a href="../../install/install-server/">Remote Server ISLE Installation</a>. </p>
</li>
<li>
<p><strong>Never ever share or post your .env files publicly.</strong> The .env and tomcat.env files ("Docker Environment files") are your primary resources for customizing your ISLE stack. These .env files contain passwords and usernames and must be treated with the utmost care.</p>
</li>
<li>
<p>You have disk space on - or mounted to - the host server large enough to store a <strong>full copy</strong> of your fedora data store.</p>
</li>
<li>
<p>You have sufficient storage available for the ISLE host server to accommodate a working copy of a production Islandora's associated configurations and data.</p>
</li>
</ul>
<hr />
<h2 id="this-section-is-in-development-please-come-back-soon">THIS SECTION IS IN DEVELOPMENT. PLEASE COME BACK SOON.</h2>
<!-- OLD STUFF
**ON your local laptop / workstation:**
* Create a directory named `yourdomain-config` (where "yourdomain" is your server domain name)
     * Example:  `project-name.yourdomain.edu-config`
* Copy all the contents of the ISLE directory to the newly created directory
* `cd` into the newly copied and renamed `yourdomain-config` directory and type:
    * `git init`
    * _Initiates this directory as a code repository._
* Type: `git remote add NameOfYourRepository URLofYourRepository`
    * Connects your local repository to the remote you set up in the above steps.
    * **NOTE:** replace "NameOfYourRepository" and "URLofYourRepository" with the name of your repository and its URL
* You are now ready to perform the customization edits in this directory (you can use a text editor of choice now don't have to stay in terminal - just locate the folder in the finder and open file in text editor)
-->

<hr />
<h2 id="migrate-only-finding-usernames-and-passwords">Migrate Only: Finding Usernames and Passwords</h2>
<ul>
<li>
<p>You have usernames and passwords for key parts of your current Islandora production environment which will be used <strong>for</strong> the migration. The next steps will walk you through finding this information.</p>
<ol>
<li>Login to your current Islandora production server. If your current production environment is located across multiple servers, you may need to check more than one server to find this information.</li>
<li>To find your Drupal MySQL username, password, and database run the following command:</li>
<li><code>grep --include=filter-drupal.xml -rnw -e 'dbname.*user.*password.*"' / 2&gt;/dev/null</code>   </li>
<li>
<p>Example output:
     <code>connection server="localhost" port="3306" dbname="**islandora**" user="**drupalIslandora**" password="**Kjs8n5zQXfPNhZ9k**"</code></p>
<ol>
<li>Username: copy the value from <code>user=</code></li>
<li>Password: copy the value from <code>password=</code></li>
<li>Database: copy the value from <code>dbname=</code></li>
</ol>
</li>
<li>
<p>To find your Fedora MySQL username, password, and database run the following command:</p>
</li>
<li><code>grep --include=fedora.fcfg -rnw -e 'name="dbUsername"' -e 'name="dbPassword"' -e 'name="jdbcURL"' / 2&gt;/dev/null</code></li>
<li>This command <em>will</em> print multiple lines. The first three lines are important but please save the rest (just in case).</li>
<li>Example output:
      <code>param name="dbUsername" value="**fedoraDB**"  
      param name="jdbcURL" value="jdbc:mysql://localhost/**fedora3**?useUnicode=true&amp;amp;amp;characterEncoding=UTF-8&amp;amp;amp;autoReconnect=true"  
      param name="dbPassword" value="**zMgBM6hGwjCeEuPD**"</code><ol>
<li>Username: Copy the value from <code>dbUsername value=</code></li>
<li>Password: Copy the value from <code>dbPassword value=</code></li>
<li>Database: Copy from the value <code>jdbcURL value=</code> the database name which is directly between the "/" and the only "?"</li>
</ol>
</li>
</ol>
</li>
<li>
<p>You know where your Fedora, Drupal (Islandora), and Solr data folders are located.</p>
<ol>
<li>
<p>Login to your current Islandora production server. If your current production environment is located across multiple servers, you may need to check more than one server to located these data folders.</p>
</li>
<li>
<p>Finding your Fedora data folder (common locations include <code>/usr/local/fedora/data</code> or <code>/usr/local/tomcat/fedora/data</code>):</p>
<p>Run a find command: <code>find / -type d -ipath '*fedora/data' -ls  2&gt;/dev/null</code></p>
</li>
<li>
<p>Finding your Drupal data folder (common location is under <code>/var/www/</code> likely in a sub-folder; e.g., html, islandora, etc.)</p>
<p>Run a grep command: <code>grep --include=index.php -rl -e 'Drupal' / 2&gt;/dev/null</code></p>
</li>
<li>
<p>Finding your Solr data folder (common location: <code>/usr/local/solr</code>, <code>/usr/local/tomcat/solr</code>, or <code>/usr/local/fedora/solr</code>)</p>
<p>Run a find command: <code>find / -type d -ipath '*solr/*/data' -ls  2&gt;/dev/null</code></p>
</li>
<li>
<p>Finding your FedoraGSearch data (i.e. transforms) folder</p>
<p>Run a find command: <code>find / -type d -ipath '*web-inf/classes/fgsconfigfinal' -ls 2&gt;/dev/null</code></p>
</li>
</ol>
</li>
<li>
<p>You have a SQL dump (export) of the current production site's Drupal database. Ensure that the contents of any <code>cache</code> table are not exported.</p>
<ol>
<li>
<p>Login to your current Islandora production server and navigate to your Drupal data folder.</p>
<p>Run the following command to generate a SQL dump of your Drupal database: <code>mysqldump -u {DRUPAL_USERNAME} -p {DRUPAL_DATABASE_NAME} | gzip &gt; drupal.sql.gz</code></p>
</li>
</ol>
</li>
</ul>
<p><strong>Finally also please note:</strong> Instructions from this guide and it's associated checklists call for you to <strong>COPY</strong> data from your current production Islandora environment to your ISLE Host Server or local computer. You work from these copies to build your ISLE environment. In some cases, you'll need to copy configurations down to your local computer (<code>Local ISLE config laptop</code>) and merge contents as directed. In other cases, due to the size of the data e.g. Fedora data you will copy directly to the ISLE Host server (<code>Remote ISLE Host server</code>). You will note where you have stored copies of files/data in a docker-compose.yml file. You will store your configured files in a git repository and use that to deploy to the ISLE host server.</p>
<h3 id="create-data-storage-directory">Create Data Storage Directory</h3>
<p>This area will be where all current Islandora production data is to be stored. This includes the Apache <code>/var/www/html</code> directory and the appropriate Fedora <code>/usr/local/fedora/data</code> subdirectories outlined below.</p>
<p><strong>ON your ISLE Host server:</strong></p>
<ul>
<li>
<p>Create a directory named <code>yourdomain-data</code> (where "yourdomain" is your server domain name)</p>
<ul>
<li>Example:  <code>project-name.yourdomain.edu-data</code></li>
</ul>
</li>
<li>
<p>Ensure that the islandora user has ownership and permissions to access this data.</p>
<ul>
<li>
<p><code>chown -Rv islandora:islandora ~/project-name.yourdomain.edu-data</code></p>
</li>
<li>
<p>Please note this path may change depending on how your ISLE host server storage area is setup.</p>
</li>
</ul>
</li>
</ul>
<hr />
<h3 id="migration-export-checklist">Migration Export Checklist</h3>
<ul>
<li>
<p>In the <code>/opt/ISLE/yourdoman-config</code> directory create a new sub-directory (you can call this <code>current_prod_islandora_config</code>)</p>
</li>
<li>
<p>You will copy some files from your current Islandora Production server(s) into this directory following the <a href="../export-checklist/">Migration Export Checklist</a> and you will copy some files and folders directly to your ISLE host server (in case the data involved is too large for your local workstation) as directed in the checklist.</p>
<ul>
<li><strong>Noting</strong> most likely the Apache data (<code>/var/www/html</code>) &amp; Fedora data (<code>/usr/local/fedora/data</code>) will be moved directly to your ISLE host server storage area and your new ISLE config files will be built on your local machine in the <code>current_prod_islandora_config</code> folder you just created.</li>
</ul>
</li>
<li>
<p>These copied files will be the source for edits and merges - just to be very clear, please <strong>don't work directly on these files in your currently running production Islandora system!</strong></p>
</li>
<li>
<p>To be even more clear, after following the checklist, you should now have two nearly identical <code>/config</code> subdirectories</p>
<ul>
<li><strong>A.</strong> copied from the cloned ISLE repository and renamed with your domain e.g. <code>yourdomain-config or project-name.yourdomain.edu-config</code></li>
<li><strong>B.</strong> copied from your currently running Islandora environment. e.g. <code>current_prod_islandora_config</code></li>
</ul>
</li>
</ul>
<h3 id="migration-merge-checklist">Migration Merge Checklist</h3>
<p>The <strong>goal</strong> is to merge all site-specific data (domain names, variables, usernames, passwords, etc..) AND all site-specific customizations or settings from the files in directory B. into the matching files in directory A.</p>
<ul>
<li>
<p>Compare the data and settings of the files found within directory <strong>B.</strong> <code>current_prod_islandora_config</code>, and then merge, edit or copy as necessary with the templated settings found within the renamed directory <strong>A.</strong> <code>yourdomain-config</code> as guided in the <a href="../merge-checklist/">Migration Merge Checklist</a>.</p>
</li>
<li>
<p>Customizations: (<em>optional</em>) Carefully compare the following most frequently customized files with the new, default versions found within your new ISLE config folder. Use a "Diff" tool (example: <a href="https://www.scootersoftware.com/download.php">Beyond Compare</a> to merge any desired customizations from your production Islandora files to persist within the new ISLE config folder of files:</p>
</li>
<li>
<p>Compare and merge the Solr files: <code>schema.xml</code></p>
</li>
<li>Compare and merge the Solr files: <code>solrconfig.xml</code></li>
<li>Compare and merge the Solr files: <code>stopwords</code></li>
<li>Compare and merge the Fedora GSearch Islandora Transform (XSLTs) folder of files: <code>islandora_transforms</code></li>
</ul>
<hr />
<h2 id="final-steps">Final Steps</h2>
<ul>
<li>
<p>Now that all the changes are made (be sure to save), ISLE should be ready to test. First you'll need to push these changes to your private code repository.</p>
<ul>
<li>
<p>Open a terminal - <code>cd</code> to the config directory you've been making the changes in...</p>
</li>
<li>
<p><code>git status</code>  this will show you all the files that have been modified and ready to be added to your private repository along with handy paths for the next steps.</p>
</li>
<li>
<p><code>git add /pathtoyourmodifiedfile</code> (replace "pathtoyourmodifiedfile" with the path to your config directory)</p>
</li>
<li>
<p>run these:</p>
</li>
</ul>
<p><code>git add apache</code>
<code>git add fedora</code>
<code>git add mysql</code>
<code>git add proxy</code>
<code>git add solr</code>
<code>git add docker-compose.yml</code></p>
<ul>
<li>
<p>run <code>git status</code> again - everything should be in green now as all modified files have been added - if anything's still red use git add and the path to add it</p>
</li>
<li>
<p>then run <code>git commit -m "initial config commit"</code> inside the double quotes is the commit message you can say whatever you want in this message - so for example if this is the config for your dev instance you could say that...</p>
</li>
<li>
<p>run <code>git push origin master</code> this will push all your changes to the repository further changes should be made on branches for different servers or to master branch for this same server</p>
</li>
</ul>
</li>
</ul>
<hr />
<h2 id="clone-custom-configuration-to-host-server">Clone Custom Configuration to Host Server</h2>
<ul>
<li>
<p>Open a terminal - ssh into your host server using the <code>islandora</code> user</p>
</li>
<li>
<p><code>cd</code> to <code>/opt/ISLE/config/</code></p>
</li>
<li>
<p>because your customizations are in a <strong>private</strong> repository, you'll need to add this islandora user's <code>id_rsa.pub</code> key to the repository via the website.</p>
</li>
<li>
<p>This key is found in <code>/home/islandora/.ssh/id_rsa.pub</code></p>
</li>
<li>
<p>One can simply run <code>cat /home/islandora/.ssh/id_rsa.pub</code> and copy the output (ensure no whitespaces or extra returns)</p>
</li>
<li>
<p>Go to the repository web site with a browser and locate your private repository.</p>
<ul>
<li>locate the ssh key entry location (in Bitbucket this is in Settings / Access Keys /</li>
<li><strong>add</strong> an ssh key w/ the label <strong>islandora host server</strong> paste in the key text and click <strong>Add Key</strong></li>
</ul>
</li>
<li>
<p>Back at your terminal command line, run <code>git clone URLpathtoyourremoteprivaterepo.git .</code> (replacing "URLpathtoyourremoteprivaterepo" with the URL to the repository provided by the website)</p>
</li>
<li>
<p><code>cd</code> into the newly cloned directory - this is a good time to check that the ISLE directory contains your <code>yourdomain-config</code> directory and that it reflects all the edits and customizations.</p>
</li>
</ul>
<h2 id="spin-up-isle-containers">Spin up ISLE Containers</h2>
<h3 id="review-or-pull-down-isle-docker-images">Review or Pull Down ISLE Docker Images</h3>
<p><em>Please Note: You may have already done this in setting up the host server manually and / or with Ansible. However it is always a good idea to review and check using the first command below.</em></p>
<ul>
<li>Check if all ISLE images have been downloaded</li>
<li>
<p><code>docker image ls</code></p>
</li>
<li>
<p>If yes, then proceed to Step 7</p>
</li>
<li>
<p>If not, then pull the latest images:</p>
<ul>
<li><code>docker-compose pull</code></li>
</ul>
</li>
</ul>
<hr />
<h3 id="spin-up-the-proxy-container">Spin Up the Proxy Container</h3>
<p>=======</p>
<ul>
<li><code>cd /opt/ISLE/yourdomain-config</code></li>
<li><code>docker-compose up -d proxy</code></li>
</ul>
<h3 id="spin-up-the-mysql-container-and-import-production-databases">Spin up the MySQL Container and Import Production Database(s)</h3>
<ul>
<li><code>cd /opt/ISLE/yourdomain-config</code></li>
<li><code>docker-compose up -d mysql</code></li>
</ul>
<p>Two methods for connecting to the MySQL Database (GUI / CLI) pick one.</p>
<ol>
<li>
<p>One may use SQL GUI clients e.g. Sequel Pro, Navicat, PHPMyAdmin etc. and import the production Drupal website database(s)</p>
</li>
<li>
<p>If the above not practical, one may connect to the MySQL container and run the following.</p>
<ul>
<li><code>docker exec -it isle-mysql-institution bash</code> to connect to the container<ul>
<li>swap out <code>institution</code> for the correct container name.</li>
</ul>
</li>
<li>appropriate mysql commands here: consult MySQL documentation - https://dev.mysql.com/doc/refman/5.7/en/</li>
</ul>
</li>
</ol>
<p>2a. (<em>optional</em>) Only follow this if you have <strong>not</strong> first run <code>drush cc all</code> and then exported the MySQL databases or if you have <strong>not</strong> exported the MySQL databases excluding the contents of any table with <code>cache</code> in the name.</p>
<p>The following are STEPS, not literal commands to prepare your db for ISLE (<em>doing this because we've found there are errors using exported db from production because of caches - causes problems - steps below help you remove this problem</em>)</p>
<ul>
<li>import the production databases into the isle-mysql-institution container (<em>with errors being ignored</em>)</li>
<li>truncate all tables that start with <code>cache</code> on the isle-mysql-institution container</li>
<li>export this new database to the <code>mysql</code> directory on the isle host server</li>
<li>delete all tables (<em>not the database itself</em>) on the isle-mysql-institution container</li>
<li>Re-import the new lighter database to the isle-mysql container</li>
</ul>
<hr />
<h3 id="spin-up-the-fedora-container-and-start-the-reindex-processes">Spin up the Fedora Container and Start the Reindex Processes</h3>
<p>Staying within <code>/opt/ISLE/yourdomain-config</code>
<em> <code>docker-compose up -d fedora</code>
    * <em>optional</em> check if fedora is running properly e.g. <code>http://isle-prod-project.institution:8080/manager/html</code>
</em> <code>docker exec -it isle-fedora-institution bash</code></p>
<ul>
<li>Follow the steps outlined in the <a href="../reindex-process/">Migration Reindex Process Guide</a><ul>
<li>Follow the steps outlined in the Reindex Fedora RI (1 of 3) section</li>
<li>Follow the steps outlined in the Reindex SQL database (2 of 3) section</li>
<li>Pause here before attempting the steps within the Reindex Solr (3 of 3) section.</li>
<li>Move onto the next section in this guide, <code>Spin up apache container</code>.</li>
</ul>
</li>
</ul>
<hr />
<h3 id="spin-up-apache-container">Spin up Apache Container</h3>
<ul>
<li>
<p>Staying within <code>/opt/ISLE/yourdomain-config</code></p>
</li>
<li>
<p><code>docker-compose up -d apache</code></p>
</li>
<li>
<p><code>docker exec -it isle-apache-institution bash</code></p>
</li>
<li>
<p>Run the vset script</p>
<ul>
<li><code>cd /var/www/html</code></li>
<li><code>./vsets.sh</code>  </li>
</ul>
</li>
<li>
<p>Edit .htaccess to enforce https</p>
<ul>
<li><code>echo "SetEnvIf X-Forwarded-Proto https HTTPS=on" | tee -a /var/www/html/.htaccess</code></li>
</ul>
</li>
<li>
<p>Check if the site is now is running properly by opening a web browser and navigating to your new ISLE domain e.g. <code>https://isle-prod-project.institution</code></p>
</li>
<li>
<p>Please note while you may be able to see objects being displayed, metadata and search results will be empty until you run the last step in the Reindex process.</p>
</li>
</ul>
<p><strong>Troubleshooting Note</strong> Sites migrating <em>from</em> a version of Drupal prior to 7.50 may need to update their mysql tables to utf8mb4.  On the new site, go to <code>https://isle-prod-project.institution/admin/reports/status</code> (you will need to be logged in as a Drupal Admin) and look for the following error:</p>
<p><img alt="Database 4 byte UTF-8 support Enabled, but database tables need conversion" src="../../assets/utf8mb4-error.png" /></p>
<p>Instructions for converting the Drupal mysql database are available on the <a href="https://www.drupal.org/project/utf8mb4_convert">Drupal website</a></p>
<hr />
<h3 id="spin-up-solr-container-and-complete-the-reindex-processes">Spin Up Solr Container and Complete the Reindex Processes</h3>
<p>=======</p>
<ul>
<li>Staying within <code>/opt/ISLE/yourdomain-config</code></li>
<li><code>docker-compose up -d solr</code></li>
<li>
<p>(<em>optional</em>) check if solr is running properly e.g. <code>http://isle-prod-project.institution:8777/manager/html</code></p>
</li>
<li>
<p><code>docker exec -it isle-fedora-institution bash</code> <strong>NOTE FEDORA NOT SOLR!</strong></p>
</li>
<li>
<p>Follow the steps outlined in the <a href="../reindex-process/">Migration Reindex Process Guide</a></p>
<ul>
<li>Follow the steps outlined only in the Reindex Solr (3 of 3) section.</li>
<li>(<em>Ensure that Tomcat and Fedora are running.</em>)</li>
</ul>
</li>
<li>
<p>Check the results on the site using Islandora simple search or the appropriate search method.</p>
</li>
</ul>
<p>Congratulations you should have successfully migrated your production Islandora site to ISLE!!</p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../../update/update/" title="Update ISLE" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Update ISLE
              </span>
            </div>
          </a>
        
        
          <a href="../export-checklist/" title="Migration Export Checklist" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Migration Export Checklist
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.583bbe55.js"></script>
      
      <script>app.initialize({version:"1.0",url:{base:"../.."}})</script>
      
        <script src="../../extra.js"></script>
      
    
    
      
    
  </body>
</html>